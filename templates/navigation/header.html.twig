{#
/**
 * @file
 * Desktop header template for SACDA theme.
 * This header has GSAP scroll animations and is only visible on desktop (>= 768px).
 * Mobile devices use the separate mobile-header.html.twig instead.
 */
#}
{% import '@sacda/macros/search.twig' as search %}

<header id="sacda-header" role="navigation" aria-label="Main navigation" class="sacda-header hidden md:block sticky top-0 z-50 bg-white/95 backdrop-blur-sm text-foreground shadow-lg transition-shadow duration-200">
	<div id="sacda-header-container" class="mx-auto flex flex-row items-center justify-between px-10 py-6">
		<div class="w-fit flex justify-between items-center">
			<a id="sacda-header-logo" href="{{ path('<front>') }}" class="origin-left">
				{% if logo %}
					<img src="{{ logo }}" alt="{{ site_name }}" class="w-64"/>
				{% else %}
					<span class="text-xl font-bold">{{ site_name }}</span>
				{% endif %}
			</a>
		</div>

		<div
			id="sacda-nav-content" class="w-auto flex flex-col items-end gap-4">
			<div
				class="sacda-menu-top flex items-center gap-4">
				<div id="sacda-menu-scrollable-wrapper" class="overflow-hidden">
					<div
						id="sacda-menu-scrollable" class="flex items-center gap-4">
						<form class="flex" role="search" id="sacda-header-search">
							{{ search.input({ width: 'w-48', id: 'sacda-search-input' }) }}
						</form>
						{{ page.menu_top }}
					</div>
				</div>
				<div id="sacda-login-region" class="relative z-50">
					{{ page.login_region }}
				</div>
			</div>
			<div id="sacda-header-nav" class="sacda-menu-bottom flex flex-row relative z-49">{{ page.menu_bottom }}</div>
		</div>
	</div>
</header>

<style>
	@source "../../css/main.css";

	/* Desktop nav link styles */
	.sacda-header .sacda-nav-list .sacda-nav-item .sacda-nav-link {
		@apply border-b-2 border-transparent pb-1 transition-all duration-200 ease-in-out no-underline inline-block text-foreground font-semibold;
	}

	.sacda-header .sacda-nav-list .sacda-nav-item .sacda-nav-link:hover {
		@apply border-b-2 border-primary;
	}

	/* Olivero override */
	#sacda-search-input {
		width: 12rem;
		max-width: none;
		min-height: auto;
		border: none;
		border-radius: 0;
		background: transparent;
	}
	#sacda-search-input:focus {
		border: none;
		outline: none;
		box-shadow: none;
	}

	/* Offset header for Drupal admin toolbar when logged in */
	body.toolbar-fixed #sacda-header {
		top: 39px;
	}
	body.toolbar-fixed.toolbar-horizontal.toolbar-tray-open #sacda-header {
		top: 79px;
	}
	body.toolbar-fixed.toolbar-vertical #sacda-header {
		top: 39px;
	}
	body.toolbar-fixed.toolbar-vertical.toolbar-tray-open #sacda-header {
		top: 39px;
	}
</style>

<script>
	(function () {
var searchForm = document.getElementById('sacda-header-search');
var searchInput = document.getElementById('sacda-search-input');

if (searchForm && searchInput) {
searchForm.addEventListener('submit', function (e) {
e.preventDefault();
var term = searchInput.value.trim();
if (term && window.sacdaSearch && window.sacdaSearch.generateIslandoraUrl) {
window.location.href = window.sacdaSearch.generateIslandoraUrl(term);
}
});
}
})();
</script>
