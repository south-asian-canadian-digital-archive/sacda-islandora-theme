/**
 * Advanced Search Block Styles - Minimal & Branded
 * Iteration 2: Fix layout, button alignment, and title size
 */

@layer components {
  .sacda-advanced-search {
    @apply w-full bg-transparent p-0;
  }

  /* Make title much smaller and less intrusive */
  .sacda-advanced-search h2 {
    @apply text-base font-bold uppercase tracking-wider text-muted-foreground mb-3 border-b border-border/50 pb-1;
  }

  /* 
   * Main Form Grid Layout 
   * Uses grid areas to place terms section and action/reset buttons
   */
  .sacda-advanced-search form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    grid-template-areas:
      "terms terms"
      "reset search";
    @apply w-full;
  }

  /* Tablet/Desktop: Auto-sized columns for buttons */
  @media (min-width: 768px) {
    .sacda-advanced-search form {
      grid-template-columns: 1fr auto auto;
      grid-template-areas:
        "terms terms terms"
        ". reset search";
    }
  }

  /* 
   * Terms Container Grid 
   * Defines the 4-column layout for search rows: Field | Operator | Value | Add/Remove
   */
  .sacda-advanced-search #edit-terms {
    grid-area: terms;
    display: grid;
    /* Mobile: Stack fields, but keep structure */
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "field field"
      "operator operator"
      "value add";
    gap: 0.5rem;
    align-items: center;
    @apply w-full;
  }

  /* Desktop Terms Grid: Single row per term */
  @media (min-width: 768px) {
    .sacda-advanced-search #edit-terms {
      grid-template-columns: minmax(140px, auto) minmax(100px, auto) 1fr auto;
      grid-template-areas: "field operator value add";
      gap: 0.75rem;
    }
  }

  /* Grid Area Assignments for Term Fields */

  /* 1. Search Field (Keyword, Title, etc) */
  .sacda-advanced-search select[name*="[search]"] {
    grid-area: field;
    @apply h-10 rounded border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary w-full;
  }

  /* 2. Operator (IS / IS NOT) */
  /* Note: If hidden by Drupal states, Grid handles this by shifting flow, but since we use explicit areas, it just leaves the gap, which is correct */
  .sacda-advanced-search select[name*="[include]"] {
    grid-area: operator;
    @apply h-10 rounded border border-input bg-background px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary w-full;
  }

  /* 3. Search Value Input */
  .sacda-advanced-search input[type="text"][name*="[value]"] {
    grid-area: value;
    @apply h-10 rounded border border-input bg-background px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary w-full;
  }

  /* 4. Add/Remove Buttons Container */
  .sacda-advanced-search [id$="-actions"] {
    grid-area: add;
    @apply flex items-center justify-end;
  }

  /* Add/Remove Button Styling */
  .sacda-advanced-search .advanced-search-form__add,
  .sacda-advanced-search .advanced-search-form__remove,
  .sacda-advanced-search input[value="-"] {
    @apply h-10 w-10 flex items-center justify-center rounded bg-muted text-muted-foreground hover:bg-primary hover:text-white transition-colors text-xl font-bold leading-none cursor-pointer border-none shadow-sm p-0 mx-0;
  }

  /* Checkbox styling (if used in future) */
  .sacda-advanced-search .form-type-boolean {
    grid-column: 1 / -1;
    /* Span full width */
    @apply flex items-center gap-2 mt-1;
  }

  /* 
   * Main Action Buttons (Reset & Search)
   * Placed via Grid Areas on the Form
   */

  /* Reset Button */
  .sacda-advanced-search input#edit-reset {
    grid-area: reset;
    @apply w-full md:w-auto min-w-[100px] h-10 px-6 bg-transparent text-muted-foreground border border-input hover:border-destructive hover:text-destructive text-sm font-bold uppercase tracking-wide rounded transition-all cursor-pointer;
  }

  /* Search Button */
  .sacda-advanced-search input#edit-submit {
    grid-area: search;
    @apply w-full md:w-auto min-w-[120px] h-10 px-6 bg-primary text-white border border-primary hover:bg-primary/90 hover:shadow-md text-sm font-bold uppercase tracking-wide rounded transition-all cursor-pointer;
  }

}